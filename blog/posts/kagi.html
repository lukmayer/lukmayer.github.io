<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Luke">
<meta name="dcterms.date" content="2025-03-30">
<meta name="description" content="Kagi has a lot to offer for power-users.">

<title>My new favorite search engine – lukmayer.github.io</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/favicons/favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2fa0555fe88427c29efa1b60aaf9e62d.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-6d7e7b9b3dbd114c66b233ded7072392.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-7945e2a833f1e1b32e2a8ee894f2be5e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-034891b1a1cc1f845fd10fe5f270baab.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="My new favorite search engine – lukmayer.github.io">
<meta property="og:description" content="Kagi has a lot to offer for power-users.">
<meta property="og:image" content="https://lukmayer.github.io/blog/posts/images/kagi.png">
<meta property="og:site_name" content="lukmayer.github.io">
<meta property="og:image:height" content="627">
<meta property="og:image:width" content="1200">
<meta name="twitter:title" content="My new favorite search engine – lukmayer.github.io">
<meta name="twitter:description" content="Kagi has a lot to offer for power-users.">
<meta name="twitter:image" content="https://lukmayer.github.io/blog/posts/images/kagi.png">
<meta name="twitter:image-height" content="627">
<meta name="twitter:image-width" content="1200">
<meta name="twitter:card" content="summary_large_image">
<link rel="canonical" href="https://lukmayer.github.io/blog/posts/kagi.html">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">lukmayer.github.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research/index.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv/index.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about/index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../now/index.html"> 
<span class="menu-text">Now</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://lukmayer.github.io/login_portal/"> 
<span class="menu-text">Login</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">My new favorite search engine</h1>
                  <div>
        <div class="description">
          Kagi has a lot to offer for power-users.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">search engines</div>
                <div class="quarto-category">software</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Luke </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 30, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="4">
    <h2 id="toc-title">Sections:</h2>
   
  <ul>
  <li><a href="#the-search-index-itself" id="toc-the-search-index-itself" class="nav-link active" data-scroll-target="#the-search-index-itself">The search index itself</a>
  <ul>
  <li><a href="#personalized-search-results" id="toc-personalized-search-results" class="nav-link" data-scroll-target="#personalized-search-results">Personalized search results</a></li>
  <li><a href="#user-friendly-features" id="toc-user-friendly-features" class="nav-link" data-scroll-target="#user-friendly-features">User-friendly features</a></li>
  </ul></li>
  <li><a href="#auxillary-services" id="toc-auxillary-services" class="nav-link" data-scroll-target="#auxillary-services">Auxillary services</a>
  <ul>
  <li><a href="#ai-features" id="toc-ai-features" class="nav-link" data-scroll-target="#ai-features">AI features</a></li>
  <li><a href="#other-niceties" id="toc-other-niceties" class="nav-link" data-scroll-target="#other-niceties">Other niceties</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<p>I’ve been using privacy-friendly web search engines ever since I concluded that willingly giving a private company (whose business is making me click on ads) a full record of my every thought is questionable at best. In my previous <a href="https://lukmayer.github.io/blog/posts/search/">search engines post</a> I compared what I saw as the main free search engines, and noted some of the more quirky things select ones tried that stuck with me. Namely “bangs”, “lenses”, maps, and some AI features. Given my affinity for these features, it really is just the natural progression that I would end up using <a href="https://kagi.com">Kagi</a>, a premium search engine that has all of these features and more.</p>
<p>The way Kagi works is simple: you pay a monthly fee, and in return you get a search engine that serves you well. No ads, no tracking. Since the company has to perpetually convince you that their service is worth your hard-earned cash every month, they have to make it good. And they do. While some people are almost cultish about the perceived quality of the search index itself, I think some of the real value for me comes from all the little additional features that Kagi has compared to other search engines. So today I’m going to give you a glimpse into Kagi and explain how they convinced me to pay for a service that is usually provided for “free”.</p>
<p><br>
</p>
<!-- 

Search engine:
- Customizable Bangs
- Customizable page ranking
- Archive, paywalls, ads, AI detection, reverse image
- Rich set of search filters, snaps
- keyboard shortcuts
- add custom CSS styles
- Custom lenses (+ bangs)
- Many helpful widgets

-->
<section id="the-search-index-itself" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-search-index-itself">The search index itself</h2>
<p>Kagi does some interesting things to surface more “organic content” than their competitors.</p>
<ul>
<li>They compile search results from multiple sources, such as the other big providers and their own crawlers</li>
<li>They down-rank sites with many ads and trackers</li>
<li>They up-rank sites that are on a list of non-commercial sites</li>
</ul>
<p>These changes already lead to much more pleasant results as hyper-SEO sites are more likely to be pushed down. There are obviously also no “sponsored” results. If this is not enough for you, Kagi makes it easy for you tailor your search experience.</p>
<p><br>
</p>
<section id="personalized-search-results" class="level3">
<h3 class="anchored" data-anchor-id="personalized-search-results">Personalized search results</h3>
<ol type="1">
<li>Kagi let’s you manually up or down-rank sites. For example, you could banish Pinterest from all your web searches with only 2 clicks. Or make sure that relevant Wikipedia pages are always at the top of the results page.</li>
</ol>
<p><br>
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/kagi_boost.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="The context menu with which Kagi allows you to adjust how sites rank"><img src="images/kagi_boost.png" class="img-fluid figure-img" data-fig-cap="The context menu with which Kagi allows you to adjust how sites rank" alt="The context menu with which Kagi allows you to adjust how sites rank"></a></p>
<figcaption>The context menu with which Kagi allows you to adjust how sites rank</figcaption>
</figure>
</div>
<p><br>
</p>
<ol start="2" type="1">
<li><p>Snaps let you filter results for a specific site, for example <code>@r best laptop</code> would only return results from Reddit. Be honest, you are already doing this because of all the SEO spam sites, just in the more verbose “Best laptop reddit”. This feature saves you those few extra keystrokes.</p></li>
<li><p>Bangs search a specific site for your query, for example <code>!yt cats</code> would take you straight to the YouTube search page for “cats”. You can set custom bangs, and create bangs for other Kagi features like lenses or custom AI assistants (more on this later).</p></li>
<li><p>Lenses can be thought of as specialized search engines that only search a specific set of sites. For example, Kagi provides a “Forums” lens that only returns results from forum sites. You can also create your own lenses, should the default set not suit your needs.</p></li>
</ol>
<p><br>
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/kagi_lens.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="A screenshot of my drop down menu for lenses."><img src="images/kagi_lens.png" class="img-fluid figure-img" data-fig-cap="A screenshot of my drop down menu for lenses." alt="A screenshot of my drop down menu for lenses."></a></p>
<figcaption>A screenshot of my drop down menu for lenses.</figcaption>
</figure>
</div>
<p><br>
</p>
</section>
<section id="user-friendly-features" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="user-friendly-features">User-friendly features</h3>
<ol type="1">
<li>There is a wide variety of filters you can apply to your search results. Kagi does images (including reverse image search), videos, podcasts, news, maps, date ranges, countries, file types, etc. You can even have it filter out image results that are likely to be AI-generated.</li>
</ol>
<p><br>
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/kagi_images.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Kagi can help you avoid/find AI-generated images with this filter option."><img src="images/kagi_images.png" class="img-fluid figure-img" data-fig-cap="Kagi can help you avoid/find AI-generated images with this filter option." alt="Kagi can help you avoid/find AI-generated images with this filter option."></a></p>
<figcaption>Kagi can help you avoid/find AI-generated images with this filter option.</figcaption>
</figure>
</div>
<p><br>
</p>
<ol start="2" type="1">
<li>Kagi has a built-in archive feature that lets you view archived versions of sites. This is especially useful for sites that have paywalls or are otherwise inaccessible. You can also interact with sites and documents through an LLM from the same context menu.</li>
</ol>
<p><br>
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/kagi_context.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="The context menu with which Kagi allows you to interact with sites and documents, including looking them up in the web archive."><img src="images/kagi_context.png" class="img-fluid figure-img" data-fig-cap="The context menu with which Kagi allows you to interact with sites and documents, including looking them up in the web archive." alt="The context menu with which Kagi allows you to interact with sites and documents, including looking them up in the web archive."></a></p>
<figcaption>The context menu with which Kagi allows you to interact with sites and documents, including looking them up in the web archive.</figcaption>
</figure>
</div>
<p><br>
</p>
<ol start="3" type="1">
<li>Kagi provides many useful widgets and can feel really “smart”. For example you can trigger AI summaries of results by including ‘?’ in your query, or trigger their translation services from natural language queries<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</li>
</ol>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Natural language queries currently seem to work best when asking to translate from English to something else. Doing the reverse requires more explicit queries like “translate ‘Kopfschmerzen’ from German to English”.</p></div></div><p><br>
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/kagi_translate2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="An example of triggering Kagi’s translation service with a natural language query."><img src="images/kagi_translate2.png" class="img-fluid figure-img" data-fig-cap="An example of triggering Kagi's translation service with a natural language query." alt="An example of triggering Kagi’s translation service with a natural language query."></a></p>
<figcaption>An example of triggering Kagi’s translation service with a natural language query.</figcaption>
</figure>
</div>
<p><br>
</p>
<ol start="4" type="1">
<li>Kagi has keyboard shortcuts for everything. ‘i’ for images, ‘v’ for videos, ‘q’ for quick answers, etc. It’s a very nice touch if you are a keyboard person.</li>
</ol>
</section>
</section>
<section id="auxillary-services" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="auxillary-services">Auxillary services</h2>
<!--
Auxillary services:
- Assistant: many models, custom instructions
- Universal summarizer, FastGPT, discuss document, Quick answer
- Kagi translate
- Kagi small web
- Kagi maps
- Orion browser
 -->
<section id="ai-features" class="level3">
<h3 class="anchored" data-anchor-id="ai-features">AI features</h3>
<p>Kagi does AI pretty well, in my opinion. That is, they always make it optional and use it to make specific enhancements. I already mentioned the context menu for interacting with sites/docs, getting quick answers from results, and triggering translation widgets. Kagi provides more fully-featured AI stuff as well.</p>
<ol type="1">
<li><p>“Kagi Assistant” is simply a chat interface to a variety of LLMs. There are a lot of models to choose from and you can switch between models within the same thread. This is only available to “Ultimate” subscribers at 25$ a month. Given that a single LLM subscription costs 20-25$ a month, an Ultimate tier Kagi subscription is kind of a no-brainer if you are already paying for LLMs. Threads can be saved and you can provide custom general instructions or create custom assistants (specific model + custom instructions). You can also set a bang for your custom assistants, or reach the assistant interface directly by typing something like <code>!ai explain bayesian non-parametrics to me like I'm 5</code> into your browser.</p></li>
<li><p>“Universal summarizer” lets you summarize any document or page (works on podcasts too). All you do is <code>!sum podcast.mp3</code>and voilà, you get a summary.</p></li>
<li><p>“Kagi translate” can be accessed as a fully featured translation service. It can translate documents, offer alternative interpretations, and voice output. Nice.</p></li>
</ol>
<p><br>
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/kagi_translate1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Kagi’s full featured translation service."><img src="images/kagi_translate1.png" class="img-fluid figure-img" data-fig-cap="Kagi's full featured translation service." alt="Kagi’s full featured translation service."></a></p>
<figcaption>Kagi’s full featured translation service.</figcaption>
</figure>
</div>
<p><br>
</p>
</section>
<section id="other-niceties" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="other-niceties">Other niceties</h3>
<p>In my original search engine post, I lamented that online mapping services are few and far in-between, with Google and Apple being the only main providers. If the gap between Google maps and Apple seems stark, the gap between Apple maps and any independent service is starker. This is why I’m excited that Kagi is building their own mapping service, even if it is still very early days.</p>
<p><br>
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="images/kagi_maps.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="The Kagi maps interface."><img src="images/kagi_maps.png" class="img-fluid figure-img" data-fig-cap="The Kagi maps interface." alt="The Kagi maps interface."></a></p>
<figcaption>The Kagi maps interface.</figcaption>
</figure>
</div>
<p><br>
</p>
<p>Kagi also has a <strong>“Small Web”</strong> feature, which essentially is a collection of personal blogs. The interface basically shows you a random post from one of these sites that was published within the last week. You can like posts, and filter for the posts that other Small web users liked. This is pretty nice for finding content to follow, and in my opinion a little less brain-dead than scrolling through spammy social media feeds. My blog here got approved to this list, so maybe you are reading this post from the Small Web interface right now?</p>
<p>Lastly, Kagi develops <strong>Orion Browser</strong>, which is pretty unique since it is built on WebKit. For example it allows you to use both Chrome and Firefox extensions, and is reportedly super resource efficient. They recently announced that a Linux version is coming this year (currently MacOs only) and the excitement in the broader Linux community is pretty noticeable. The more purist Linux nerds seem to broadly lament both Mozilla as a company, and that everything non-Firefox is built on Chromium, so Orion seems to tick all the nerd boxes if it will indeed be released as open-source software.</p>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>Some interesting things about Kagi as a company are that they are very active on their forums, and already profitable with zero VC funding. Their subscriber base has almost doubled since I started using them late last year. It’s nice to see a less-than-extremely-evil company do well.</p>
</div></div></section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>So there you have it, paying for Kagi delivers serious results. It is pretty polished, user-friendly, and has a lot of features that make it stand out from the competition. I think they have a bright future ahead of them, and I’m excited to see where they take things!</p>


</section>


</main> <!-- /main -->
<div id="utterances-container"></div>

<div id="utterances-container"></div>

<script>
class UtterancesThemeManager {
  constructor() {
    this.container = document.getElementById('utterances-container');
    this.loaded = false;
    this.init();
  }

  getTheme() {
    const checks = [
      () => document.body.classList.contains('quarto-dark'),
      () => document.documentElement.classList.contains('quarto-dark'),
      () => document.body.getAttribute('data-bs-theme') === 'dark',
      () => document.documentElement.getAttribute('data-bs-theme') === 'dark',
      () => document.body.classList.contains('dark'),
      () => document.documentElement.classList.contains('dark')
    ];

    return checks.some(check => {
      try { return check(); } catch { return false; }
    }) ? 'dark' : 'light';
  }

  async waitForPageReady() {
    return new Promise((resolve) => {
      const checkReady = () => {
        const conditions = [
          document.readyState === 'complete',
          document.body.offsetHeight > 0, 
          window.getComputedStyle(document.body).backgroundColor !== '', 
          !document.querySelector('link[rel="stylesheet"]:not([media="print"])') || 
          Array.from(document.querySelectorAll('link[rel="stylesheet"]:not([media="print"])')).every(link => link.sheet)
        ];

        if (conditions.every(Boolean)) {
          setTimeout(resolve, 200);
        } else {
          setTimeout(checkReady, 50);
        }
      };

      checkReady();
    });
  }

  async loadUtterances() {
    if (this.loaded) return;

    try {
      await this.waitForPageReady();

      let theme = this.getTheme();
      await new Promise(resolve => setTimeout(resolve, 100));

      const stableTheme = this.getTheme();
      if (theme !== stableTheme) {
        theme = stableTheme;
        await new Promise(resolve => setTimeout(resolve, 100));
      }

      console.log('Loading Utterances with theme:', theme);

      this.container.innerHTML = '';

      const script = document.createElement('script');
      script.src = 'https://utteranc.es/client.js';
      script.setAttribute('repo', 'lukmayer/site_comments');
      script.setAttribute('issue-term', 'pathname');
      script.setAttribute('theme', theme === 'dark' ? 'github-dark' : 'github-light');
      script.setAttribute('crossorigin', 'anonymous');
      script.setAttribute('async', '');

      script.onload = () => {
        this.loaded = true;
        console.log('Utterances successfully loaded');
      };

      this.container.appendChild(script);

    } catch (error) {
      console.error('Error loading Utterances:', error);
    }
  }

  updateTheme() {
    const iframe = document.querySelector('.utterances-frame');
    if (iframe) {
      const theme = this.getTheme();
      const utterancesTheme = theme === 'dark' ? 'github-dark' : 'github-light';

      try {
        iframe.contentWindow.postMessage(
          { type: 'set-theme', theme: utterancesTheme },
          'https://utteranc.es'
        );
        console.log('Updated Utterances theme to:', theme);
      } catch (e) {
        console.warn('Failed to update Utterances theme:', e);
      }
    }
  }

  setupObservers() {
    let updateTimeout;
    const debouncedUpdate = () => {
      clearTimeout(updateTimeout);
      updateTimeout = setTimeout(() => this.updateTheme(), 150);
    };

    const observerConfig = {
      attributes: true,
      attributeFilter: ['class', 'data-bs-theme']
    };

    [document.body, document.documentElement].forEach(element => {
      const observer = new MutationObserver(debouncedUpdate);
      observer.observe(element, observerConfig);
    });
  }

  init() {
    this.setupObservers();

    if (document.readyState === 'loading') {
      window.addEventListener('load', () => {
        setTimeout(() => this.loadUtterances(), 300);
      });
    } else {
      setTimeout(() => this.loadUtterances(), 500);
    }
  }
}

new UtterancesThemeManager();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = true;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https://www.lukmayer.github.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lukmayer/website">
      <i class="bi bi-code-slash" role="img" aria-label="Source code">
</i> 
    </a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://quarto.org">
<p>Made with <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 24 24"><path fill="currentColor" d="M12.65 12.854V24c6.042-.325 10.923-5.105 11.33-11.125H12.65Zm-1.504 0H.02c.427 5.94 5.166 10.699 11.105 11.105V12.854Zm1.505-1.505H24C23.675 5.247 18.753.325 12.65 0Zm-1.505 0V0C5.106.427.326 5.308 0 11.35Z"></path></svg></p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="../../blog/index.xml">
      <i class="bi bi-rss-fill" role="img" aria-label="Blog RSS feed">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>